{
  // =========================================================
  //  1. 界面与基础外观 (UI & Appearance)
  // =========================================================
  "workbench.colorTheme": "Default Dark+",
  "workbench.startupEditor": "none",
  "workbench.editor.wrapTabs": true,
  "workbench.editor.enablePreview": false, // 打开文件不覆盖
  "editor.fontFamily": "'JetBrainsMono Nerd Font', 'JetBrains Mono', monospace",
  "editor.fontSize": 14,
  // 适当增加行高，既利于阅读，也利于 AI Diff 视图的展示
  "editor.lineHeight": 24, 
  "editor.fontLigatures": true,
  // 仅显示相对行号，这是 Vim 用户的最佳实践
  "editor.lineNumbers": "relative",
  "editor.renderWhitespace": "boundary",
  "editor.cursorBlinking": "expand",
  "editor.minimap.enabled": true,
  // 彩虹括号，嵌套代码救星
  "editor.bracketPairColorization.enabled": true,
  "editor.guides.bracketPairs": "active",
  // 状态栏自定义（深青色）
  "workbench.colorCustomizations": {
    "statusBar.background": "#007acc",
    "statusBar.noFolderBackground": "#007acc",
    "statusBar.debuggingBackground": "#007acc",
    "statusBar.foreground": "#ffffff",
    "statusBar.debuggingForeground": "#ffffff"
  },
  // 终端外观
  "terminal.integrated.fontFamily": "'JetBrainsMono Nerd Font', monospace",
  "terminal.integrated.fontSize": 14,
  "terminal.integrated.cursorBlinking": true,
  // 关闭 GPU 加速以防 Linux 下渲染闪烁（视显卡情况可改回 "auto"）
  "terminal.integrated.gpuAcceleration": "off",

  // =========================================================
  //  2. 编辑器核心行为 (Core Editor Behavior)
  // =========================================================
  // 缩进与换行
  "editor.tabSize": 2,
  "editor.insertSpaces": true,
  "editor.detectIndentation": true,
  "editor.wordWrap": "on",
  // 文件保存与格式化
  "files.eol": "\n",
  "files.insertFinalNewline": true,
  "files.trimFinalNewlines": true,
  "files.trimTrailingWhitespace": true,
  "files.encoding": "utf8",
  "files.autoSave": "onFocusChange", // Java 编译防卡顿关键设置
  "editor.formatOnSave": true,
  "editor.formatOnPaste": false,
  "editor.formatOnType": false,
  // 滚动与导航
  "editor.scrollBeyondLastLine": false,
  "editor.smoothScrolling": true,
  "workbench.list.smoothScrolling": true,
  // 文件管理
  "explorer.confirmDelete": false,
  "security.workspace.trust.untrustedFiles": "open",

  // =========================================================
  //  3. Vim 深度集成 (Vim Integration)
  // =========================================================
  "vim.leader": "<space>",
  "vim.useSystemClipboard": true,
  "vim.smartRelativeLine": true,
  "vim.hlsearch": true,
  "vim.incsearch": true,
  "vim.ignorecase": true,
  "vim.smartcase": true,
  "vim.sneak": true,
  "vim.surround": true,
  "vim.useCtrlKeys": true,
  "vim.mouseSelectionGoesIntoVisualMode": true,
  "vim.statusBarColorControl": true,
  // 快捷键冲突解决：False = 交给 VSCode/Cursor，True = Vim 处理
  "vim.handleKeys": {
    "<C-w>": false, // 窗口管理 -> VSCode
    "<C-p>": false, // 文件跳转 -> VSCode
    "<C-k>": false, // Cursor AI Generate -> VSCode (关键)
    "<C-l>": false, // Cursor AI Chat -> VSCode (关键)
    "<C-i>": false, // Cursor Composer -> VSCode (关键)
    "<C-h>": false, // 导航 -> VSCode
    "<C-j>": false, // 导航 -> VSCode
    "<C-d>": true,  // 向下半页 -> Vim
    "<C-u>": true,  // 向上半页 -> Vim
    "<C-f>": false, // 防止与搜索或 AI 冲突 -> VSCode
    "<C-b>": true,  // 向上整页 -> Vim
    "<C-n>": true,  // 下一个补全 -> Vim
    "<C-g>": false, // 文件信息 -> VSCode
    "<C-y>": false  // 确认 -> VSCode
  },
  // Linux Fcitx5 输入法自动切换
  "vim.autoSwitchInputMethod.enable": true,
  "vim.autoSwitchInputMethod.obtainIMCmd": "/usr/bin/fcitx5-remote",
  "vim.autoSwitchInputMethod.defaultIM": "1",
  "vim.autoSwitchInputMethod.switchIMCmd": "/usr/bin/fcitx5-remote -c", // 强制关闭输入法回英文
  "editor.cursorSmoothCaretAnimation": "off", // 关闭平滑动画以减少输入法干扰

  // =========================================================
  //  4. AI 与 智能补全优化 (Cursor / Copilot)
  // =========================================================
  // 减少 AI "夺权"，Tab 仅用于缩进，Enter 接受建议
  "editor.tabCompletion": "off", 
  "editor.suggestSelection": "first",
  "editor.inlineSuggest.enabled": true,
  // 降低干扰：打字时不自动弹出单词建议，只显示 AI 补全
  "editor.suggest.showWords": false,
  "editor.suggest.showSnippets": true,
  // Diff 视图优化：更适合 Review AI 的改动
  "diffEditor.renderSideBySide": true,
  "diffEditor.wordWrap": "on",
  "diffEditor.ignoreTrimWhitespace": false,

  // =========================================================
  //  5. 语言特定设置 (Language Specific)
  // =========================================================
  // --- Java ---
  "java.configuration.runtimes": [
    {
      "name": "JavaSE-1.8",
      "path": "/usr/lib/jvm/zulu-8-openjdk"
    },
    {
      "name": "JavaSE-17",
      "path": "/usr/lib/jvm/java-17-openjdk",
      "default": true
    },
    {
      "name": "JavaSE-21",
      "path": "/usr/lib/jvm/java-21-openjdk"
    }
  ],
  "java.configuration.updateBuildConfiguration": "automatic",
  "java.compile.nullAnalysis.mode": "automatic",
  "java.import.maven.enabled": true,
  "java.import.gradle.enabled": false,
  "java.debug.settings.maxStringLength": 10000,
  "java.debug.settings.showStaticVariables": true,
  "java.debug.settings.showQualifiedNames": true,
  "java.debug.settings.showLogicalStructure": true,
  "[java]": {
    "editor.defaultFormatter": "redhat.java",
    "editor.formatOnSave": true,
    "editor.formatOnPaste": true,
    "editor.formatOnSaveMode": "modifications",
    // 自动移除未使用的 import
    "editor.codeActionsOnSave": {
      "source.organizeImports": "explicit"
    }
  },

  // --- Docker / YAML ---
  "[dockercompose]": {
    "editor.insertSpaces": true,
    "editor.tabSize": 2,
    "editor.autoIndent": "advanced",
    "editor.defaultFormatter": "redhat.vscode-yaml"
  },
  "[github-actions-workflow]": {
    "editor.defaultFormatter": "redhat.vscode-yaml"
  },

  // --- XML ---
  "[xml]": {
    "editor.defaultFormatter": "redhat.vscode-xml",
    "editor.formatOnSave": false
  },
  "xml.format.splitAttributes": "preserve",
  "xml.format.joinContentLines": true,
  "xml.format.spaceBeforeEmptyCloseTag": true,

  // --- Web (JS/TS/JSON) ---
  "[jsonc]": {
    "editor.defaultFormatter": "vscode.json-language-features"
  },
  "javascript.updateImportsOnFileMove.enabled": "always",
  "debug.javascript.debugByLinkOptions": "on",

  // =========================================================
  //  6. 性能与系统优化 (Performance & System)
  // =========================================================
  // 排除大文件夹，防止 Cursor 索引和 Java 插件卡死
  "files.watcherExclude": {
    "**/target/**": true,
    "**/dist/**": true,
    "**/build/**": true,
    "**/.gradle/**": true,
    "**/.mvn/**": true,
    "**/node_modules/**": true,
    "**/.git/objects/**": true,
    "**/.idea/**": true
  },
  "files.exclude": {
    "**/.git": true,
    "**/.svn": true,
    "**/.hg": true,
    "**/CVS": true,
    "**/.DS_Store": true,
    "**/Thumbs.db": true,
    "**/node_modules": true
  },
  "search.exclude": {
    "**/node_modules": true,
    "**/bower_components": true,
    "**/*.code-search": true,
    "**/.git": true,
    "**/.idea": true,
    "**/target": true,
    "**/build": true
  },
  
  // =========================================================
  //  7. 其他杂项 (Misc)
  // =========================================================
  "database-client.autoSync": true,
  "git.autofetch": true,
  "git.suggestSmartCommit": false,
  "http.useLocalProxyConfiguration": false,
  "editor.unicodeHighlight.nonBasicASCII": false, // 不高亮中文
  "editor.unicodeHighlight.allowedLocales": {
    "zh-hans": true,
    "zh-hant": true
  },
  // Cursor 多 Profile 同步设置（如需要同步，请取消注释并填入设置项 ID）
  "workbench.settings.applyToAllProfiles": []
}
